<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<form id="mongoForm" method="post">
<!--    <input type="hidden"  th:value="${id}"  name="id" >-->
<!--    <div >-->
<!--        <label for="">商品ID</label>-->
<!--        <input type="text"  name="id"  id="username" placeholder="用户名称">-->
<!--    </div>-->
<!--    <div >-->
<!--        <label for="name">商品名称</label>-->
<!--        <input type="text"   name="name"  id="age" placeholder="年龄">-->
<!--    </div>-->

    <div class="form-group">
        <label >轮播图片</label>
        <input type="file" name="goodsImg" id="g_ImgId"  class="form-control" >
        <input type="hidden" name="imgsrc" id="goodsImgsrc"   >
    </div>

</form>
<script type="text/javascript">

    $(function (){
        $("#g_ImgId").fileinput({
            //上传按钮
            showUpload:true,
            //移除按钮
            showRemove : true,
            //最大上传文件的个数，想要多选文件，input文件域必须加上multiple这个属性
            // maxFileCount:2,
            //主样式
            mainClass: "input-group-lg",
            //按钮样式
            browseClass: "btn btn-primary btn-block",
            //语言设置：中文
            language : 'zh',
            //允许预览的文件类型
            allowedPreviewTypes : [ 'image', 'text' ],
            //允许选择的文件后缀名
            allowedFileExtensions : [ 'jpg', 'png', 'gif'],
            //最大上传文件的大小（KB）
            maxFileSize : 2000,
            //是否显示路径文本框
            showCaption:true,
            //是否显示预览
            showPreview:true,
            //是否显示关闭预览框
            showClose:false,
            //是否显示文件选择按钮
            showBrowse:true,
            //文件上传的路径，设置可实现拖拽
            uploadUrl :'/img/imgUpload',
            validateInitialCount:true,
            previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
            msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
        });
        //fileuploaded 上传文件之后的方法
        $('#g_ImgId').on('fileuploaded', function(event, data, previewId, index) {
            alert(data.response.imgId);
            //console.info(data.response.imgId);
            //图片主键回显到隐藏域
            $("#goodsImgsrc").val(data.response.imgId);
        });

    })
</script>
</body>
